

<!-- Основное меню -->
<ion-menu side="right" [content]="content" id="organizer_filter" (ionClose)="whenFilterMenuClose()">

    <ion-header no-border>
        <ion-toolbar color="dark" no-border>
            <ion-title>
                {{ 'organizer.filter.title' | translate }}
                <!--Filter-->
            </ion-title>

            <ion-buttons right text-center>
                <button ion-button (click)="menuToggle()">
                    <ion-icon name="md-close" class="back_arrow"></ion-icon>
                </button>
            </ion-buttons>

        </ion-toolbar>

    </ion-header>

    <ion-content dir="rtl">

        <!--Фильтр по типам оповещений-->
        <div class="filter_block">

            <ion-row class="filter_name">
                <ion-col>
                    {{ 'organizer.filter.type' | translate }}
                    <!--Type-->
                </ion-col>
            </ion-row>


            <ion-row class="sphere_filter_item" (click)="clearStateFilter()">
                <ion-col col-2 text-center>

                    <ion-icon *ngIf="filter.state.length == 0" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>
                    <ion-icon *ngIf="filter.state.length != 0" name="md-square-outline"></ion-icon>

                </ion-col>

                <ion-col>
                    {{ 'organizer.filter.all' | translate }}
                    <!--All-->
                </ion-col>
            </ion-row>


            <ion-row class="sphere_filter_item" *ngFor="let state of allStates" (click)="selectState(state)">
                <ion-col col-2 text-center align-self-center>

                    <ion-icon *ngIf="state.status" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>
                    <ion-icon *ngIf="!state.status" name="md-square-outline"></ion-icon>

                </ion-col>

                <ion-col>
                    {{ state.name }}
                </ion-col>
            </ion-row>

        </div>

    </ion-content>

    <ion-footer>
        <ion-toolbar color="dark" text-right>
            <button menuClose (click)="filterApply()" ion-button>
                {{ 'organizer.filter.apply' | translate }}
                <!--Apply-->
            </button>
            <button menuClose (click)="filterReset()" ion-button color="danger">
                {{ 'organizer.filter.reset' | translate }}
                <!--Reset-->
            </button>
        </ion-toolbar>
    </ion-footer>

</ion-menu>
<!-- конец Основное меню -->



<ion-header>

    <ion-navbar color="primary">

        <ion-buttons left text-center>
            <button ion-button (click)="close()">
                <ion-icon name="ios-arrow-back" class="back_arrow"></ion-icon>
            </button>
        </ion-buttons>

        <ion-title>
            {{ 'organizer.title' | translate }}
            <!--Organizer-->
        </ion-title>

        <ion-buttons right text-right>
            <!--<button ion-button [attr.disabled]="!spheres ? '' : null" (click)="addLead()">-->
            <!--add lead-->
            <!--</button>-->
            <button ion-button icon-only (click)="menuToggle()">
                <!--<button ion-button icon-only menuToggle="right">-->

                <!--<ion-icon *ngIf="isNoticeFilterOn" class="notice_filter_on_header" name="md-square"></ion-icon>-->

                <!--<ion-icon [ngClass]="isNoticeFilterOn ? 'notice_filter_on' : '' " name="ios-funnel"></ion-icon>-->
                <ion-icon name="ios-funnel"></ion-icon>
            </button>

            <!--<button ion-button icon-only (click)="presentPopover($event)">-->
            <!--<ion-icon name="more"></ion-icon>-->
            <!--</button>-->
        </ion-buttons>

    </ion-navbar>

</ion-header>


<ion-content #content>

    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <!-- сообщение что нет итемов органайзера -->
    <div *ngIf="isOrganizerEmpty" class="no_notification_items">
        <div class="no_notification_items_icon">
            <ion-icon name="contract"></ion-icon>
        </div>
        {{ 'organizer.no_items' | translate }}
        <!--no items-->
    </div>

    <div *ngIf="isLoading" text-center padding class="loading_block">
        <ion-spinner color="primary" name="crescent"></ion-spinner>
    </div>

    <div *ngIf="!isLoading">
    <!--<div *ngIf="items">-->

        <ion-row *ngFor="let item of items" class="organizer-row" (click)="itemActionSheet(item)" [ngClass]="item.dell ? 'dell' : ''">

            <ion-col col-1 align-self-center>
                <ion-icon class="status_icon_pending" *ngIf="item.status == 0" name="md-square-outline"></ion-icon>
                <ion-icon class="status_icon_overdue" *ngIf="item.status == 2" name="md-square"></ion-icon>
                <ion-icon class="status_icon_done" *ngIf="item.status == 1" name="md-checkbox-outline"></ion-icon>
                <!--<ion-icon class="status_icon_done" name="md-checkbox-outline"></ion-icon>-->
            </ion-col>

            <ion-col text-right align-self-center>
                <div class="date"> <span class="time">{{ timeFormat(item.time) }}</span> {{ dateFormat(item.time) }}</div>
                <div class="name"> {{ item.surname }} {{ item.name }} </div>
                <div class="comment"> {{ item.comment }} </div>
            </ion-col>

            <!--<ion-col class="organizer-data" text-right no-padding>-->

                <!--&lt;!&ndash;<div class="date"> <span class="time">{{ item.date.time }}</span> {{ item.date.date }} </div>&ndash;&gt;-->
                <!--<div *ngIf="item.status == 'pending'" class="status_pending">pending</div>-->
                <!--<div *ngIf="item.status == 'overdue'" class="status_overdue">overdue</div>-->
                <!--<div *ngIf="item.status == 'done'" class="status_done">done</div>-->

                <!--<div class="comment">{{ item.text }}</div>-->
            <!--</ion-col>-->

        </ion-row>

    </div>


    <!-- Подгрузка следующей партии итемов -->
    <ion-infinite-scroll *ngIf="isLastPageReached()" (ionInfinite)="loadMore($event)">
    <!--<ion-infinite-scroll (ionInfinite)="loadMore($event)">-->
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>
    <!-- конец Подгрузка следующей партии итемов -->

</ion-content>


<!--<ion-footer>-->
    <!--<div text-center>-->
        <!--<button ion-button small round (click)="addItem()">-->
            <!--Add-->
            <!--&lt;!&ndash;<ion-icon name="md-alarm"></ion-icon>&ndash;&gt;-->
        <!--</button>-->
    <!--</div>-->
<!--</ion-footer>-->