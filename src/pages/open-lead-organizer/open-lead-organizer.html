

<!-- Основное меню -->
<ion-menu side="right" [content]="content" id="open_lead_organizer_filter" (ionClose)="whenFilterMenuClose()">

    <ion-header no-border>
        <ion-toolbar color="dark" no-border>

            <ion-title>Filter</ion-title>

            <ion-buttons right text-center>
                <button ion-button (click)="menuToggle()">
                    <ion-icon name="md-close" class="back_arrow"></ion-icon>
                </button>
            </ion-buttons>

        </ion-toolbar>

    </ion-header>

    <ion-content>

        <!-- Фильтр по периоду -->
        <!--<div class="filter_block">-->

            <!--<ion-row class="filter_name">-->
                <!--<ion-col>-->
                    <!--Period-->
                <!--</ion-col>-->
            <!--</ion-row>-->

            <!--&lt;!&ndash; Начало периода &ndash;&gt;-->
            <!--<ion-item class="period_filter_item period_filter_from">-->
                <!--<ion-label>From</ion-label>-->
                <!--<ion-datetime-->
                        <!--displayFormat="DD/MM/YYYY"-->
                        <!--pickerFormat="DD-MM-YYYY"-->
                        <!--[(ngModel)]="noticesFilter.period.from">-->
                <!--</ion-datetime>-->
            <!--</ion-item>-->

            <!--&lt;!&ndash; Конец периода &ndash;&gt;-->
            <!--<ion-item class="period_filter_item period_filter_from">-->
                <!--<ion-label>To</ion-label>-->
                <!--<ion-datetime-->
                        <!--displayFormat="DD/MM/YYYY"-->
                        <!--pickerFormat="DD-MM-YYYY"-->
                        <!--[(ngModel)]="noticesFilter.period.to">-->
                <!--</ion-datetime>-->
            <!--</ion-item>-->

            <!--&lt;!&ndash; Кнопка обнуления &ndash;&gt;-->
            <!--<button small ion-button round color="danger" (click)="resetPeriod()">reset period</button>-->

        <!--</div>-->


        <!-- Фильтр по типам статусам оповещений -->
        <!--<div class="filter_block">-->

            <!--<ion-row class="filter_name">-->
                <!--<ion-col>-->
                    <!--Statuses-->
                <!--</ion-col>-->
            <!--</ion-row>-->

            <!--&lt;!&ndash; Показывать все статусы &ndash;&gt;-->
            <!--<ion-row class="sphere_filter_item" (click)="selectStatus('all')">-->
                <!--<ion-col col-2 text-center>-->

                    <!--<ion-icon *ngIf="noticesFilter.status == 'all'" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>-->
                    <!--<ion-icon *ngIf="noticesFilter.status != 'all'" name="md-square-outline"></ion-icon>-->

                <!--</ion-col>-->

                <!--<ion-col>-->
                    <!--All statuses-->
                <!--</ion-col>-->
            <!--</ion-row>-->

            <!--&lt;!&ndash; Показывать только не отмеченные &ndash;&gt;-->
            <!--<ion-row class="sphere_filter_item" (click)="selectStatus('not_market')">-->
                <!--<ion-col col-2 text-center>-->

                    <!--<ion-icon *ngIf="noticesFilter.status == 'not_market'" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>-->
                    <!--<ion-icon *ngIf="noticesFilter.status != 'not_market'" name="md-square-outline"></ion-icon>-->

                <!--</ion-col>-->

                <!--<ion-col>-->
                    <!--Not market-->
                <!--</ion-col>-->
            <!--</ion-row>-->


            <!--&lt;!&ndash; Показывать только отмеченные &ndash;&gt;-->
            <!--<ion-row class="sphere_filter_item" (click)="selectStatus('marked')">-->
                <!--<ion-col col-2 text-center>-->

                    <!--<ion-icon *ngIf="noticesFilter.status == 'marked'" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>-->
                    <!--<ion-icon *ngIf="noticesFilter.status != 'marked'" name="md-square-outline"></ion-icon>-->

                <!--</ion-col>-->

                <!--<ion-col>-->
                    <!--Market-->
                <!--</ion-col>-->
            <!--</ion-row>-->

        <!--</div>-->


         <!--Фильтр по типам оповещений-->
        <div class="filter_block">

            <ion-row class="filter_name">
                <ion-col>
                    Type
                </ion-col>
            </ion-row>


            <ion-row class="sphere_filter_item" (click)="clearStateFilter()">
                <ion-col col-2 text-center>

                    <ion-icon *ngIf="filter.state.length == 0" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>
                    <ion-icon *ngIf="filter.state.length != 0" name="md-square-outline"></ion-icon>

                </ion-col>

                <ion-col>
                    All
                </ion-col>
            </ion-row>


            <ion-row class="sphere_filter_item" *ngFor="let state of allStates" (click)="selectState(state)">
                <ion-col col-2 text-center align-self-center>

                    <ion-icon *ngIf="state.status" name="md-checkbox-outline" class="selected_sphere_icon"></ion-icon>
                    <ion-icon *ngIf="!state.status" name="md-square-outline"></ion-icon>

                </ion-col>

                <ion-col>
                    {{ state.name }}
                </ion-col>
            </ion-row>

        </div>

    </ion-content>

    <ion-footer>
        <ion-toolbar color="dark">
            <button menuClose (click)="filterApply()" ion-button>Apply</button>
            <button menuClose (click)="filterReset()" ion-button color="danger">Reset</button>
        </ion-toolbar>
    </ion-footer>

</ion-menu>
<!-- конец Основное меню -->



<ion-header>

    <ion-navbar color="primary">

        <ion-buttons left text-center>
            <button ion-button (click)="close()">
                <ion-icon name="ios-arrow-back" class="back_arrow"></ion-icon>
            </button>
        </ion-buttons>

        <ion-title>{{ leadData.name }} {{ leadData.surname ? leadData.surname : '' }}</ion-title>

        <ion-buttons right text-right>
            <!--<button ion-button [attr.disabled]="!spheres ? '' : null" (click)="addLead()">-->
            <!--add lead-->
            <!--</button>-->
            <button *ngIf="organizerBlocks == 'reminders'" ion-button icon-only (click)="menuToggle()">
                <!--<button ion-button icon-only menuToggle="right">-->

                <!--<ion-icon *ngIf="isNoticeFilterOn" class="notice_filter_on_header" name="md-square"></ion-icon>-->

                <!--<ion-icon [ngClass]="isNoticeFilterOn ? 'notice_filter_on' : '' " name="ios-funnel"></ion-icon>-->
                <ion-icon name="ios-funnel"></ion-icon>
            </button>

            <!--<button ion-button icon-only (click)="presentPopover($event)">-->
            <!--<ion-icon name="more"></ion-icon>-->
            <!--</button>-->
        </ion-buttons>

    </ion-navbar>

    <ion-toolbar>
        <div class="segment_control_block">
            <ion-segment [(ngModel)]="organizerBlocks">

                <ion-segment-button value="reminders" class="organizer-name">
                    <ion-icon name="alarm"></ion-icon> Reminders
                </ion-segment-button>
                <ion-segment-button value="comments" class="organizer-name">
                    <ion-icon name="ios-paper-outline"></ion-icon> Comments
                </ion-segment-button>

            </ion-segment>
        </div>
    </ion-toolbar>

</ion-header>


<ion-content #content>

    <div *ngIf="isLoading" text-center padding class="loading_block">
        <ion-spinner color="primary" name="crescent"></ion-spinner>
    </div>

    <div *ngIf="items">

        <div [ngSwitch]="organizerBlocks">

            <div *ngIf="!isLoading">

                <ion-row *ngSwitchCase="'reminders'">
                    <ion-col>
                        <ion-row *ngFor="let item of items['reminders']" class="organizer-row" (click)="itemActionSheet(item)">

                            <ion-col col-1 align-self-center>
                                <ion-icon class="status_icon_pending" *ngIf="item.status == 'pending'" name="md-square-outline"></ion-icon>
                                <ion-icon class="status_icon_overdue" *ngIf="item.status == 'overdue'" name="md-square"></ion-icon>
                                <ion-icon class="status_icon_done" *ngIf="item.status == 'done'" name="md-checkbox-outline"></ion-icon>
                            </ion-col>

                            <ion-col col-5 text-left align-self-center>
                                <!--<ion-icon name="alarm"></ion-icon>-->
                                <div class="date"> <span class="time">{{ item.date.time }}</span> {{ item.date.date }} </div>

                            </ion-col>

                            <ion-col class="organizer-data" text-right no-padding>

                                <!--<div class="date"> <span class="time">{{ item.date.time }}</span> {{ item.date.date }} </div>-->
                                <div *ngIf="item.status == 'overdue'" class="status_overdue">overdue</div>
                                <div *ngIf="item.status == 'pending'" class="status_pending">pending</div>
                                <div *ngIf="item.status == 'done'" class="status_done">done</div>

                                <div class="comment">{{ item.text }}</div>
                            </ion-col>

                        </ion-row>

                        <ion-row *ngIf="items['reminders'].length == 0 && !isFilterOn">

                            <ion-col text-center no-padding class="no_reminders">

                                no reminders

                            </ion-col>

                        </ion-row>

                        <ion-row *ngIf="items['reminders'].length == 0 && isFilterOn">

                            <ion-col text-center no-padding class="no_filter_reminders">

                                no reminders by filter

                            </ion-col>

                        </ion-row>


                    </ion-col>
                </ion-row>

                <ion-row *ngSwitchCase="'comments'">
                    <ion-col>

                        <ion-row *ngFor="let item of items['comments']" class="organizer-row" (click)="itemActionSheet(item)">

                            <ion-col class="organizer-data" text-right>

                                <div class="comment">{{ item.text }}</div>
                            </ion-col>

                        </ion-row>

                        <ion-row *ngIf="items['comments'].length == 0">

                            <ion-col text-center no-padding class="no_reminders">

                                no comments

                            </ion-col>

                        </ion-row>

                    </ion-col>
                </ion-row>

            </div>

        </div>

    </div>

</ion-content>


<ion-footer>
    <div text-center>
        <button ion-button small round (click)="addItem()">
            Add
            <!--<ion-icon name="md-alarm"></ion-icon>-->
        </button>
    </div>
</ion-footer>